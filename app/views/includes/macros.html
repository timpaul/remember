

{% macro timeline(data) %}



  {% set months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'] %}
  {% set numYears = data.endYear - data.startYear +1 %}
  {% set yearsArray = Array(numYears) %}
  {% set timelines = data.timelines %}

<table class="timeline">
  <thead>
    <tr>
      <td colspan="2">Date</td>
      {% for a, b in timelines %}

      <td class="content width-1-{{ timelines.length }}">
        {{ b.name }} 
        <!--{{ b.dob|date('jS \o\f F') }}-->

      </td>
      {% endfor %} 
    </tr>
  </thead>

  <tbody>

  {% for x, y in yearsArray %}

  {% for month in months %}
    {% if loop.first %}
    <tr class="new-year">
      <td class="year" rowspan="12" id="date-{{ year }}">{{ x + data.startYear }}</td>
      <td class="month" id="date-{{ x + data.startYear }}-{{ loop.key + 1 }}">{{ month }}</td>
      {% for a, b in timelines %}
      <td class="content" contenteditable="true" id="id-{{b.id}}-{{ x + data.startYear }}-{{ month }}"></td>
      {% endfor %} 
    </tr>
    {% else %}
    <tr>
      <td class="month" id="date-{{ x + data.startYear }}-{{ loop.key + 1 }}">{{ month }}</td>
      {% for a, b in timelines %}
      <td class="content" contenteditable="true" id="id-{{b.id}}-{{ x + data.startYear }}-{{ month }}"></td>
      {% endfor %} 
    </tr>
    {% endif %}
  {% endfor %} 
  {% endfor %} 
  </tbody>
</table>


{% endmacro %}